============================================================================================
Lab Description
============================================================================================
Machine name		            			        Roles:						IP Address: (Private)		IP Address: (Public)       SSH
Training_NodeJS_Scaling_StudentGX_1    	            Load Test Machine			X.X.X.X 					X.X.X.X     		        ssh -i "XXXX.pem" ubuntu@X.X.X.X
Training_NodeJS_Scaling_StudentGX_2                 MEAN.JS                     X.X.X.X 				    X.X.X.X                     ssh -i "XXXX.pem" ubuntu@X.X.X.X
Training_NodeJS_Scaling_StudentGX_3       	        Magento                     X.X.X.X 					X.X.X.X                     ssh -i "XXXX.pem" ubuntu@X.X.X.X         
============================================================================================

Part1 : Start Performance Test (Load Test Machine)
============================================================================================
0. In case UltraVNC is cannot connect. Kill and recreate vnc session by command:
    vncserver -kill :1
    vncserver -geometry 1600x900 :1

1. Open Jmeter GUI (If disapper. Please run
   sed -i -e 's/"${HEAP:="-Xms1g -Xmx1g -XX:MaxMetaspaceSize=256m"}"/"${HEAP:="-Xms2g -Xmx2g -XX:MaxMetaspaceSize=512m"}"/g' /home/ubuntu/apache-jmeter-5.1.1/bin/jmeter
   /home/ubuntu/apache-jmeter-5.1.1/bin/jmeter

============================================================================================
Part 2: Start Performance Test Scenario 1 (First Page View: MEAN.JS)
============================================================================================
1. (Local machine): Open url for cAdvisor in browser: http://<Public IP of MEAN.JS>:8080
    1.1 Duplicate tab for monitor: Container: mean
    1.2 Duplicate tab for monitor: Container: mongodb

2. (Load Test Machine) Open Test File name: FirstPage.jmx

3. (Load Test Machine) Configure private ip address of WebServer Docker on menu below:
    3.1 Select Test Plan(First Page View) ==> "User Defined Variables" and Change value on "BASE_URL_1" to <Private IP of Mean.JS>
    3.2 Select Test Plan(First Page View) ==> "Thread Group (First Page View)" and Change Value:
        3.2.1 Number of Threads (users): 200
        3.2.2 Ramp-Up Period (in seconds): 120
        3.2.3 Loop Count: [] Forever

4. (Load Test Machine) Clear existing data by menu (Run ==> Clear All)

5. (Load Test Machine) Start load test by menu (Run ==> Start) with 5 min duration

6. (Docker Machine MEANJS) Monitor Performance (When Thread User is 200/200)
    6.1 Monitor via cAdvisor: (Check with command: docker inspect mean |grep "Id")
    6.2 Monitor via command line:
        6.2.1 uptime, top
        6.2.2 vmstat 10
        6.2.3 iostat -xtc 10
        6.2.4 sar -n DEV 10
        6.2.5 docker stats

7. (Load Test Machine) Stop load test by menu (Run ==> Shutdown)

8. (Load Test Machine) Check result from all listerner
    *Option: Enable "Assertion Duration" for check response time

9. (Load Test Machine) If timeslot avaliable. Repeat Step 3 - 8 with Number of Threads below
    9.1 400 Threads
    9.2 600 Threads
    9.3 1000 Threads
    9.4 2000 Threads
    9.5 3000 Threads
    9.6 4000 Threads

============================================================================================
Part 3: Start Performance Test Scenario 1 (First Page View: MAGENTO)
============================================================================================
1. (Local machine): Open url for cAdvisor in browser: http://<Public IP of MAGENTO>:8080
    1.1 Duplicate tab for monitor: Container: mean
    1.2 Duplicate tab for monitor: Container: mongodb

2. (Load Test Machine) Open Test File name: FirstPage_Magento.jmx

3. (Load Test Machine) Configure private ip address of WebServer Docker on menu below:
    3.1 Select Test Plan(First Page View) ==> "User Defined Variables" and Change value on "BASE_URL_1" to <Private IP of Magento>
    3.2 Select Test Plan(First Page View) ==> "Thread Group (First Page View)" and Change Value:
        3.2.1 Nuber of Threads (users): 200
        3.2.2 Ramp-Up Period (in seconds): 120
        3.2.3 Loop Count: [] Forever

4. (Load Test Machine) Clear existing data by menu (Run ==> Clear All)

5. (Load Test Machine) Start load test by menu (Run ==> Start) with 5 min duration and Check result

6. (Docker Machine MEANJS) Monitor Performance (When Thread User is 200/200)
    6.1 Monitor via cAdvisor: (Check with command: docker inspect mean |grep "Id")
    6.2 Monitor via command line:
        6.2.1 uptime, top
        6.2.2 vmstat 10
        6.2.3 iostat -xtc 10
        6.2.4 sar -n DEV 10
        6.2.5 docker stats

7. (Load Test Machine) Stop load test by menu (Run ==> Shutdown)

8. (Load Test Machine) Check result from all listerner
    *Option: Enable "Assertion Duration" for check response time

9. (Load Test Machine) If timeslot avaliable. Repeat Step 3 - 8 with Number of Threads below
    9.1 50 Threads
    9.2 100 Threads
    9.3 1000 Threads
    9.4 2000 Threads
    9.5 3000 Threads
    9.6 4000 Threads